"use strict";(self.webpackChunkapollo_testing_toolkit_link_docs=self.webpackChunkapollo_testing_toolkit_link_docs||[]).push([[924],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return d}});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var g=o.createContext({}),c=function(e){var t=o.useContext(g),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=c(e.components);return o.createElement(g.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,g=e.parentName,s=a(e,["components","mdxType","originalType","parentName"]),u=c(n),d=i,k=u["".concat(g,".").concat(d)]||u[d]||p[d]||r;return n?o.createElement(k,l(l({ref:t},s),{},{components:n})):o.createElement(k,l({ref:t},s))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=u;var a={};for(var g in t)hasOwnProperty.call(t,g)&&(a[g]=t[g]);a.originalType=e,a.mdxType="string"==typeof e?e:i,l[1]=a;for(var c=2;c<r;c++)l[c]=n[c];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},843:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return a},contentTitle:function(){return g},metadata:function(){return c},toc:function(){return s},default:function(){return u}});var o=n(3117),i=n(102),r=(n(7294),n(3905)),l=["components"],a={id:"logging-and-recording",title:"Logging and recording",sidebar_label:"Logging and recording",custom_edit_url:null,hide_title:!0},g="Logging, recording and code generation",c={unversionedId:"logging-and-recording",id:"logging-and-recording",isDocsHomePage:!1,title:"Logging and recording",description:"Logging",source:"@site/docs/logging-and-recording.md",sourceDirName:".",slug:"/logging-and-recording",permalink:"/apollo-testing-toolkit-link/docs/logging-and-recording",editUrl:null,tags:[],version:"current",frontMatter:{id:"logging-and-recording",title:"Logging and recording",sidebar_label:"Logging and recording",custom_edit_url:null,hide_title:!0},sidebar:"default",previous:{title:"Usage in Cypress",permalink:"/apollo-testing-toolkit-link/docs/usage-in-cypress"},next:{title:"Pitfalls",permalink:"/apollo-testing-toolkit-link/docs/pitfalls"}},s=[{value:"Logging",id:"logging",children:[],level:2},{value:"Recording and code generation",id:"recording-and-code-generation",children:[],level:2},{value:"I want to know more!",id:"i-want-to-know-more",children:[],level:2}],p={toc:s};function u(e){var t=e.components,a=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,o.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"logging-recording-and-code-generation"},"Logging, recording and code generation"),(0,r.kt)("h2",{id:"logging"},"Logging"),(0,r.kt)("p",null,"One of the key features of the Testing Toolkit is the ability to log all (or select) operations and the data associated with them."),(0,r.kt)("p",null,"This makes it much easier to create and update mocks. To use, follow these steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Open the webapp in your favorite browser (making sure the testing-toolkit is enabled -- e.g. using development build of the site)."),(0,r.kt)("li",{parentName:"ul"},"Open DevTools and the console"),(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("a",{parentName:"li",href:"/apollo-testing-toolkit-link/docs/api/classes/ApolloTestingToolkit.LogApi#startlogging"},(0,r.kt)("inlineCode",{parentName:"a"},"apolloTestingToolkit.log.startLogging()")))),(0,r.kt)("p",null,'I recommend filtering your console\'s output to "GQL", as it will remove all the other noise.'),(0,r.kt)("p",null,"You may pass an optional filter to the ",(0,r.kt)("a",{parentName:"p",href:"/apollo-testing-toolkit-link/docs/api/classes/ApolloTestingToolkit.LogApi#startlogging"},(0,r.kt)("inlineCode",{parentName:"a"},"startLogging"))," function. See ",(0,r.kt)("a",{parentName:"p",href:"/apollo-testing-toolkit-link/docs/api/classes/ApolloTestingToolkit.LogApi"},"API documentation")," for details."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Example logging output",src:n(167).Z})),(0,r.kt)("h2",{id:"recording-and-code-generation"},"Recording and code generation"),(0,r.kt)("p",null,"With complex scenarios, copying and pasting long JSONs and extracting variables from them is still a tedious job. That's where recording comes in!"),(0,r.kt)("p",null,"To enable recording, follow the same steps as for enabling logging, then additionally:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"apolloTestingToolkit.log.startRecording('opening a chat ticket' /* what you are about to do */)"))),(0,r.kt)("p",null,"By describing the first action, it will be included in the recording and generated code,\nso you can orient yourself better."),(0,r.kt)("p",null,"As you record, if there are multiple actions in the story you want to capture,\nbefore each action you take, I highly recommend marking them using the ",(0,r.kt)("inlineCode",{parentName:"p"},"markAction")," function:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"apolloTestingToolkit.log.markAction('opening the next ticket')"))),(0,r.kt)("p",null,"As you record, you'll notice the red dot indicator \ud83d\udd34 now appearing next to the logs."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Example recording output",src:n(2696).Z})),(0,r.kt)("p",null,"Once you're ready, stop the recording:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"apolloTestingToolkit.log.stopRecording()"))),(0,r.kt)("p",null,"To automatically generate fixtures, interceptors and calls in order of your activity:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"apolloTestingToolkit.log.generateCode()")),(0,r.kt)("li",{parentName:"ul"},"Watch the magic happen! \ud83c\udfa9")),(0,r.kt)("h2",{id:"i-want-to-know-more"},"I want to know more!"),(0,r.kt)("p",null,"For more advanced usage of logging, recording, code generation, filtering and other options see the ",(0,r.kt)("a",{parentName:"p",href:"/apollo-testing-toolkit-link/docs/api/classes/ApolloTestingToolkit.LogApi"},"Log API documentation"),"."))}u.isMDXComponent=!0},167:function(e,t,n){t.Z=n.p+"assets/images/example-logging-98e6cd2981c269d286e2ef2866140764.png"},2696:function(e,t,n){t.Z=n.p+"assets/images/example-recording-042379b211abc45d31fa27ba7c894f06.png"}}]);